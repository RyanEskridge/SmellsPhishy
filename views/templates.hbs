{{> header}}

    <style>
        .truncate {
            max-width: 300px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
    </style>

    <div class="my-4"><h3>Email Templates List</h3></div>
    <table class="table table-striped mt-3">
    <thead>
        <tr>
        <th scope="col">#</th>
        <th scope="col">Name</th>
        <th scope="col">Subject</th>
        <th scope="col">Body Preview</th>
        <th scope="col"></th>
        </tr>
    </thead>
    <tbody>
        {{#each templates}}
        <tr>
        <th scope="row">{{this.id}}</th>
        <td>{{this.name}}</td>
        <td>{{this.subject}}</td>
        <td class="truncate">{{this.body}}</td>
        <td>
            <a href="/templates/edit/{{this.id}}" class="btn btn-secondary mx-2">
                    <i class="bi bi-pen p-2"></i>
            </a>
            <button class="btn brand-btn" onclick="confirmDeletion('{{this.id}}')">
                <i class="bi bi-trash3"></i> Delete
            </button>
            <form id="delete-form-{{this.id}}" action="/templates/delete/{{this.id}}" method="POST" style="display:none;"></form>
        </td>
        </tr>
        {{/each}}
    </tbody>
    </table>

    <script>
    function confirmDeletion(id) {
        // Display confirmation dialog
        if (confirm('Are you sure you want to delete this template?')) {
            // If confirmed, submit the corresponding form
            document.getElementById('delete-form-' + id).submit();
        }
    }
    </script>
